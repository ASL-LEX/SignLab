<div *ngIf="firstTimeSetup; then firstTimeSetupView else routerView"></div>

<!-- View project owner sees when setting up the application -->
<ng-template #firstTimeSetupView>
  <first-time-setup [onSetupComplete]='this.setupComplete'></first-time-setup>
</ng-template>

<!-- Normal view during SignLab usage -->
<ng-template #routerView style="height: 100%">
  <mat-drawer-container style="height: 100%">

    <mat-drawer mode="side" class="navbar" opened>
      <div style="color: #fafafa">ASL-LEX SignLab</div>

      <mat-nav-list>
        <a mat-list-item
           routerLink="/tag"
           routerLinkActive="active-link"
           class="nav-link">Tagging</a>

        <!-- Project Controls -->
        <mat-expansion-panel class="navbar">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <a mat-list-item
                 routerLink="/admin"
                 routerLinkActive="active-link"
                 class="nav-link">Projects</a>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">User Permissions</a>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">Dataset Access</a>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">Create new Project</a>
          </mat-nav-list>
        </mat-expansion-panel>

        <!-- Studies Control -->
        <mat-expansion-panel class="navbar">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <a mat-list-item
                 routerLink="/admin"
                 routerLinkActive="active-link"
                 class="nav-link">Studies</a>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-nav-list>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">User Permissions</a>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">Tags</a>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">Entry Controls</a>
            <a mat-list-item
               routerLink="/project"
               routerLinkActive="active-link"
               class="nav-link">Contribute</a>
          </mat-nav-list>
        </mat-expansion-panel>

        <a mat-list-item
           *ngIf="authService.isAuthenticated() && authService.user.roles.owner"
           routerLink="/owner"
           routerLinkActive="active-link"
           class="nav-link">Owner</a>
        <a mat-list-item
           routerLink="/auth"
           routerLinkActive="active-link"
           *ngIf="!authService.isAuthenticated()"
           class="nav-link">Login</a>
        <a mat-list-item
           *ngIf="authService.isAuthenticated()"
           (click)="logout()"
           class="nav-link">Logout</a>
      </mat-nav-list>
    </mat-drawer>

    <div class="main-content">
      <!-- Main View -->
      <router-outlet></router-outlet>
    </div>
  </mat-drawer-container>
</ng-template>
